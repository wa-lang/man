<!DOCTYPE HTML>
<html lang="zh" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using https://github.com/wa-lang/mnbook -->
        <meta charset="UTF-8">
        <title>Array - Wa-lang's Manual</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mnbook-theme');
                var sidebar = localStorage.getItem('mnbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mnbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mnbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mnbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mnbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter">
  <li class="chapter-item expanded ">
    <a href="../index.html" >Wa-lang's manual</a>
  </li>
  <li class="chapter-item expanded ">
    <a href="../preface.html" >Preface</a>
  </li>
  <li class="chapter-item expanded ">
    <a href="../1.InstallAndGetStart/readme.html" ><strong aria-hidden="true">1.</strong> Install And Get Start</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../1.InstallAndGetStart/1.1.HelloWorld.html" ><strong aria-hidden="true">1.1.</strong> hello world</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../1.InstallAndGetStart/1.2.Install.html" ><strong aria-hidden="true">1.2.</strong> Install Wa-lang Compiler</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../1.InstallAndGetStart/1.3.Command.html" ><strong aria-hidden="true">1.3.</strong> wa command line</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../1.InstallAndGetStart/1.4.ProjectStructure.html" ><strong aria-hidden="true">1.4.</strong> Project directory structure</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../1.InstallAndGetStart/1.5.Plugins.html" ><strong aria-hidden="true">1.5.</strong> Plug-ins for IDE</a>
    </li>
  </ol>
  <li class="chapter-item expanded ">
    <a href="../2.ProgramStructure/readme.html" ><strong aria-hidden="true">2.</strong> Program structure</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../2.ProgramStructure/2.1.GlobalDeclaration.html" ><strong aria-hidden="true">2.1.</strong> Global declaration</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../2.ProgramStructure/2.2.GlobalVariableDeclaration.html" ><strong aria-hidden="true">2.2.</strong> Global variable declaration</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../2.ProgramStructure/2.3.FunctionDeclaration.html" ><strong aria-hidden="true">2.3.</strong> Function declaration</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../2.ProgramStructure/2.4.ConstDeclaration.html" ><strong aria-hidden="true">2.4.</strong> Constant declaration</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../2.ProgramStructure/2.5.ImportDeclaration.html" ><strong aria-hidden="true">2.5.</strong> Import declaration</a>
    </li>
  </ol>
  <li class="chapter-item expanded ">
    <a href="../3.BasicTypes/readme.html" ><strong aria-hidden="true">3.</strong> Basic types</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../3.BasicTypes/3.1.LocalVariableDeclaration.html" ><strong aria-hidden="true">3.1.</strong> Local variable declaration</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../3.BasicTypes/3.2.Integers.html" ><strong aria-hidden="true">3.2.</strong> Integers</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../3.BasicTypes/3.3.FloatingPointNumbers.html" ><strong aria-hidden="true">3.3.</strong> Floating point number</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../3.BasicTypes/3.4.String.html" ><strong aria-hidden="true">3.4.</strong> String</a>
    </li>
  </ol>
  <li class="chapter-item expanded ">
    <a href="../4.Function/readme.html" ><strong aria-hidden="true">4.</strong> Function</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../4.Function/4.1.FunctionCall.html" ><strong aria-hidden="true">4.1.</strong> Function call</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../4.Function/4.2.FunctionValues.html" ><strong aria-hidden="true">4.2.</strong> Function values</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../4.Function/4.3.AnonymousFunctionsAndClosures.html" ><strong aria-hidden="true">4.3.</strong> Anonymous functions and closures</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../4.Function/4.4.ifStatements.html" ><strong aria-hidden="true">4.4.</strong> if statements</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../4.Function/4.5.forStatements.html" ><strong aria-hidden="true">4.5.</strong> for statements</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../4.Function/4.6.switchStatements.html" ><strong aria-hidden="true">4.6.</strong> switch statements</a>
    </li>
  </ol>
  <li class="chapter-item expanded ">
    <a href="../5.CompositeTypes/readme.html" ><strong aria-hidden="true">5.</strong> Composite types</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../5.CompositeTypes/5.1.Reference.html" ><strong aria-hidden="true">5.1.</strong> Reference</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../5.CompositeTypes/5.2.Array.html" class="active"><strong aria-hidden="true">5.2.</strong> Array</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../5.CompositeTypes/5.3.Slice.html" ><strong aria-hidden="true">5.3.</strong> Slice</a>
    </li>
  </ol>
  <li class="chapter-item expanded ">
    <a href="../6.CustomTypes/readme.html" ><strong aria-hidden="true">6.</strong> Custom types</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../6.CustomTypes/6.1.Structure.html" ><strong aria-hidden="true">6.1.</strong> Structure</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../6.CustomTypes/6.2.Method.html" ><strong aria-hidden="true">6.2.</strong> Method</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../6.CustomTypes/6.3.MethodValues.html" ><strong aria-hidden="true">6.3.</strong> Method values</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../6.CustomTypes/6.4.EmbeddedStructure.html" ><strong aria-hidden="true">6.4.</strong> Embedded structure</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../6.CustomTypes/6.5.AnonymousStructure.html" ><strong aria-hidden="true">6.5.</strong> Anonymous structure</a>
    </li>
  </ol>
  <li class="chapter-item expanded ">
    <a href="../7.Interface/readme.html" ><strong aria-hidden="true">7.</strong> Interface</a>
  </li>
  <ol class="section">
    <li class="chapter-item expanded ">
      <a href="../7.Interface/7.1.NullInterface.html" ><strong aria-hidden="true">7.1.</strong> Null interface - universal wrapper</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../7.Interface/7.2.Non-nullInterface.html" ><strong aria-hidden="true">7.2.</strong> Non-null interface</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../7.Interface/7.3.TypeAssertions.html" ><strong aria-hidden="true">7.3.</strong> Summary of type assertions</a>
    </li>
    <li class="chapter-item expanded ">
      <a href="../7.Interface/7.4.OtherFeatures.html" ><strong aria-hidden="true">7.4.</strong> Other features of interface</a>
    </li>
  </ol>
</ol>

            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                    </div>

                    <h1 class="menu-title"><a href="../index.html">Wa-lang's Manual</a></h1>

                    <div class="right-buttons">
                        <a href="https://github.com/wa-lang/man" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/wa-lang/man/edit/master/en/5.CompositeTypes/5.2.Array.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p><em>The content on this page is written in Chinese, and then traslated into English by machine. More accurate traslations are welcome at: <a href="https://github.com/wa-lang/man/tree/master/en">https://github.com/wa-lang/man/tree/master/en</a></em></p>
<p><em><strong>Ending's law: &quot;Any application that can be compiled to WebAssembly, will be compiled to WebAssembly eventually.&quot;</strong></em></p>
<h2>5.2. Array</h2>
<p>The basic declaration of an array type is as follows:</p>
<pre><code class="language-wa">[N]T
</code></pre>
<p>Among them, <code>N</code> is the array length (a constant integer greater than 0), and <code>T</code> is the array element type; for example:</p>
<pre><code class="language-wa">    a: [3]i32
    a[0] = 42
    println(a[0]) // 42
</code></pre>
<p>Like many languages, Wa-lang use the <code>x[M]</code> syntax to access specific elements within an array. When declaring an array variable, you can use the following methods to set the initial value of the array element:</p>
<pre><code class="language-wa">    a: [3]i32 = [3]i32{13, 42, 9527}
    println(a[0], a[1], a[2]) // 13 42 9527
</code></pre>
<p><code>[3]i32{13, 42, 9527}</code> declares an array literal, so the declaration of the array variable <code>a</code> in the above example can be simplified to:</p>
<pre><code class="language-wa">    a := [3]i32{13, 42, 9527}
</code></pre>
<p>When declaring an array literal, the number of elements contained in the subsequent <code>{}</code> can be less than the array length (but not greater), and the missing part is a 0 value, for example:</p>
<pre><code class="language-wa">    a := [3]i32{13, 42}
    println(a[2]) // 0
</code></pre>
<p>The built-in function <code>len</code> can be used to get the length of an array, which is the number of elements contained in the array, for example:</p>
<pre><code class="language-wa">    a := [3]i32
    println(len(a)) // 3
</code></pre>
<p>When declaring an array literal, if the array length part is written as <code>...</code>, it means that the array length is determined by the number of elements in the following <code>{}</code>, for example:</p>
<pre><code class="language-wa">    a := [...]i32{13, 42}
    println(len(a)) // 2
</code></pre>
<p><strong>Arrays are value types in Wa-lang</strong>, for example:</p>
<pre><code class="language-wa">    a := [...]i32{13, 42}
    b: [2]i32
    b = a
    println(b[0], b[1]) // 13 42
    b[0] = 9527
    println(a[0]) // 13
</code></pre>
<p>It can be seen that when assigning an array to another array, each corresponding element will be assigned, which means a deep copy operation is performed. Since arrays are values, there is no correlation between assigned arrays.</p>
<p>Arrays with the same element type but different lengths are considered different types, so the following program is illegal:</p>
<pre><code class="language-wa">    a: [2]i32
    b: [3]i32
    b = a // Illegal, different types cannot be assigned
</code></pre>
<hr>
<p>Known issues:</p>
<ul>
<li>Bounds checking is not performed when accessing array elements via variable subscripts. This problem does not affect syntax compatibility. Subsequent corrections to this problem will not affect the existing source code. Developers using Wa-lang do not need to deal with this issue specially.</li>
<li>In the current version of the implementation, the array is expanded into a set of linear values. Therefore, when the array is assigned, the number of virtual registers and instructions is an integral multiple of the array length. If the length is too large, the size of the target code will expand rapidly. This problem does not affect syntax compatibility, and subsequent corrections to this problem will not affect existing source code. At this stage, program developers should pay attention to: except for global variables, try not to use arrays with a length greater than 8.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../5.CompositeTypes/5.1.Reference.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                        
                            <!-- ../5.CompositeTypes/5.3.Slice.html -->
                            <a rel="next" href="../5.CompositeTypes/5.3.Slice.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../5.CompositeTypes/5.1.Reference.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                
                    <a rel="next" href="../5.CompositeTypes/5.3.Slice.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
